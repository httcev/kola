<ion-view>
	<ion-nav-bar class="bar-positive">
		<ion-nav-back-button></ion-nav-back-button>
		<ion-nav-title>{{isStep ? 'Teilschritt: ' + taskOrStep.name : 'Arbeitsauftrag: ' + taskOrStep.name}}</ion-nav-title>
		<ion-nav-buttons side="secondary">
			<button menu-toggle="right" class="button button-icon icon ion-navicon"></button>
		</ion-nav-buttons>
	</ion-nav-bar>
	<ion-content class="padding">
		<div ng-if="!taskOrStep" class="center-horizontal">
			<ion-spinner class="spinner-large"></ion-spinner>
		</div>
		<div ng-if="taskOrStep" class="task-detail">
			<h3>{{taskOrStep.name}}</h3>
      		<p ng-if="taskOrStep.due"><b>FÃ¤llig:</b> {{taskOrStep.due | date:'fullDate'}}</p>
			<div class="text" marked="taskOrStep.description"></div>
			<media-attachments ng-model="taskOrStep"></media-attachments>
			<learning-resources ng-model="taskOrStep"></learning-resources>
			<div class="padding-bottom">
				<ion-list ng-if="!isStep && taskOrStep.steps.length">
					<h1 class="task-section-header padding-top">Teilschritte:</h1>
					<ion-item ng-repeat="step in taskOrStep.steps" class="item-icon-right" type="item-text-wrap" ui-sref="task.step({taskId:taskOrStep.id, stepId:step.id})">
						{{$index+1}}. {{step.name}}
						<i class="icon ion-chevron-right icon-accessory"></i>
					</ion-item>
				</ion-list>
			</div>
            <div class="center-horizontal">
                <button class="button button-balanced button-full icon-left icon httc-compose-add new-documentation-button" ng-click="createDocumentation()" on-hold="openPopoverDocumentation($event)">
                    <span ng-if="isStep">Teilschritt dokumentieren</span>
                    <span ng-if="!isStep">Arbeitsauftrag dokumentieren</span>
                </button>
                <button class="button button-calm button-full icon-left icon httc-question-add new-question-button" ng-click="createQuestion()" on-hold="openPopoverQuestion($event)">
                    <span ng-if="isStep">Frage zum Teilschritt stellen</span>
                    <span ng-if="!isStep">Frage zum Arbeitsauftrag stellen</span>
                </button>
			</div>
		</div>
	</ion-content>
</ion-view>
