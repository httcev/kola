<ion-view view-title="Aufgaben">
  <ion-nav-buttons side="secondary">
    <ion-spinner ng-if="$root.onlineState.isSyncing" icon="dots"></ion-spinner>
    <span ng-if="!$root.onlineState.isOnline"><i class="icon assertive ion-alert-circled"></i> Offline</span>
    <i ng-if="$root.onlineState.isOnline" class="icon dark ion-checkmark-round"></i>
  </ion-nav-buttons>
  <ion-content>
    <ion-list>
      <div class="item item-divider item-stable item-icon-left" ng-click="$root.onlineState.isOnline=!$root.onlineState.isOnline"><i class="icon ion-alert assertive"></i><b>Anstehend:</b></div>
      <ion-item ng-repeat="task in pendingTasks = (tasks | filter:{done:'!true'} | orderBy:'due')" class="item-remove-animate item-icon-left item-icon-right" type="item-text-wrap" href="#/tab/tasks/{{task._id}}">
        <i ng-if="task.type!='homework'" class="icon ion-clipboard"></i>
        <i ng-if="task.type=='homework'" class="icon ion-university"></i>
        <h2>{{task.title}}</h2>
        <p ng-if="task.due"><b>Wann</b>: {{task.due | date:'fullDate'}}</p>
        <i class="icon ion-chevron-right icon-accessory"></i>

        <ion-option-button class="button-balanced" ng-click="task.done=true">
          <i class="icon ion-checkmark-round"></i>
        </ion-option-button>
      </ion-item>
      <div ng-hide="pendingTasks.length" class="padding">Keine anstehenden Aufgaben</div>

      <div class="item item-divider item-stable item-icon-left"><i class="icon ion-checkmark-round balanced"></i><b>Erledigt:</b></div>
      <ion-item ng-repeat="task in completedTasks = (tasks | filter:{done:true} | orderBy:'-due')" class="item-remove-animate item-icon-left item-icon-right" type="item-text-wrap" href="#/tab/tasks/{{task._id}}">
        <i class="icon ion-clipboard"></i>
        <h2>{{task.title}}</h2>
        <p ng-if="task.due"><b>Wann</b>: {{task.due | date:'fullDate'}}</p>
        <i class="icon ion-chevron-right icon-accessory"></i>

        <ion-option-button class="button-assertive" ng-click="remove(task)">
          <i class="icon ion-trash-a"></i>
        </ion-option-button>
      </ion-item>
      <div ng-hide="completedTasks.length" class="padding">Keine erledigten Aufgaben</div>
    </ion-list>
  </ion-content>
</ion-view>
