<ion-view>
  <ion-nav-title>Dokumentation des Arbeitsauftrags</ion-nav-title>
  <ion-nav-buttons side="secondary">
    <button menu-toggle="right" class="button button-icon icon ion-navicon"></button>
  </ion-nav-buttons>
  <ion-content class="padding">
    <h1 class="task-section-header">Meine Dokumentation<!-- und Fragen-->:</h1>
    <div class="list card documentation" ng-repeat="documentation in documentations | orderBy:'lastUpdated'">
      <div class="item item-divider">
        <author-info ng-model="documentation"></author-info>
        <button class="button button-positive button-clear button-small icon ion-edit edit-documentation-button" ng-click="editDocumentation(documentation)"></button>
      </div>
      <div class="item item-text-wrap">
        <div class="text">{{documentation.text}}</div>
      </div>
      <media-attachments ng-model="documentation" hide-header="true"></media-attachments>
    </div>
    <div class="center-horizontal">
      <button class="button button-balanced icon-left icon ion-plus new-documentation-button" ng-click="editDocumentation()">Neue Dokumentation anlegen</button>
    </div>

    <div ng-if="taskOrStep.reflectionQuestions.length">
      <h1 class="task-section-header padding">Meine Erfahrungen:</h1>
      <div class="list card">
        <form name="form" ng-repeat="reflectionQuestion in taskOrStep.reflectionQuestions track by reflectionQuestion.id" class="item item-text-wrap">
          <div class="energized reflection-question">{{reflectionQuestion.name}}</div>
          <author-info ng-model="reflectionAnswers[reflectionQuestion.id]"></author-info>
          <textarea ng-model="reflectionAnswers[reflectionQuestion.id].text" msd-elastic="\n" class="fullwidth animate no-resize" placeholder="Geben Sie hier Ihre Antwort ein..."></textarea>
          <div class="text-center" ng-show="form.$dirty">
            <button class="button button-balanced icon-left" ng-click="saveReflectionAnswer(reflectionAnswers[reflectionQuestion.id], form)"><i class="icon ion-checkmark"></i> Speichern</button>
          </div>
        </div>
      </form>
    </div>
  </ion-content>
</ion-view>
